# 需求文档

## 介绍

本规范解决文件批量重命名应用中的关键错误和用户体验问题。该应用目前有三个主要标签页（查找替换、添加序列、大小写转换），但存在标签页切换逻辑错误，导致所有非替换功能都被当作替换操作处理，造成序列和大小写转换功能完全失效。此外，还存在预览更新问题、文件列表管理问题和UI优化需求。

## 需求

### 需求1：核心标签页功能恢复

**用户故事：** 作为用户，我希望所有三个标签页（查找替换、添加序列、大小写转换）都能正常工作，这样我就可以为文件使用不同的重命名策略。

#### 验收标准

1. 当我切换到"添加序列"标签页时，系统应显示序列特定的预览结果
2. 当我切换到"大小写转换"标签页时，系统应显示大小写转换预览结果
3. 当我在"添加序列"标签页执行重命名时，系统应应用序列编号规则
4. 当我在"大小写转换"标签页执行重命名时，系统应应用大小写转换规则
5. 当我在标签页之间切换时，系统不应对非替换标签页显示"请输入要查找的内容"错误

### 需求2：标签页切换和预览更新

**用户故事：** 作为用户，我希望在切换标签页时预览立即更新，这样我就能看到每种重命名方法的预期结果。

#### 验收标准

1. 当我从一个标签页切换到另一个标签页时，预览应立即更新以显示新标签页的结果
2. 当我在任何标签页中更改输入值时，预览应实时更新
3. 当我切换标签页时，系统应正确识别活动标签页以生成预览
4. 当预览更新时，系统应为活动标签页使用正确的规则逻辑

### 需求3：重命名后的文件列表管理

**用户故事：** 作为用户，我希望在成功重命名操作后文件列表保持可见并显示更新的名称，这样我就能看到结果并使用撤销功能。

#### 验收标准

1. 当重命名操作成功完成时，文件列表应保持填充状态
2. 当重命名操作成功完成时，文件列表应显示新的文件名
3. 当重命名操作成功完成时，撤销按钮应变为可用状态
4. 当重命名后保留文件列表时，撤销功能应正常工作

### 需求4：执行重命名函数逻辑

**用户故事：** 作为用户，我希望执行重命名函数能正确识别哪个标签页处于活动状态并应用相应的规则，这样我的重命名操作就能按预期工作。

#### 验收标准

1. 当我点击执行重命名时，系统应正确识别活动标签页
2. 当活动标签页是"序列"时，系统应验证序列特定的输入
3. 当活动标签页是"大小写"时，系统应验证大小写转换输入
4. 当活动标签页是"替换"时，系统应验证查找/替换输入
5. 当规则验证失败时，系统应为每种标签页类型显示适当的错误消息

### 需求5：按钮组UI优化

**用户故事：** 作为用户，我希望有一个干净直观的按钮界面，没有不必要的按钮，这样我就能高效地管理重命名操作。

#### 验收标准

1. 当我查看按钮组时，系统应只显示三个按钮：执行重命名、撤销重命名、全部清空
2. 当我查看按钮组时，按钮文本不应换行到多行
3. 当没有执行重命名操作时，撤销按钮应被禁用并显示为灰色
4. 当重命名操作成功完成时，撤销按钮应变为可用和可点击状态
5. 当我点击撤销时，撤销按钮应再次变为禁用状态

### 需求6：输入验证和错误处理

**用户故事：** 作为用户，我希望有清晰准确的错误消息对应活动标签页，这样我就能理解需要纠正什么。

#### 验收标准

1. 当我在序列标签页且输入为空时，系统应显示"请填写序列号起始和位数"
2. 当我在大小写标签页且没有选择时，系统应显示"请选择大小写转换类型"
3. 当我在替换标签页且查找字段为空时，系统应显示"请输入要查找的内容"
4. 当我在非替换标签页时，系统不应显示替换特定的错误消息
5. 当验证失败时，执行按钮应保持禁用状态